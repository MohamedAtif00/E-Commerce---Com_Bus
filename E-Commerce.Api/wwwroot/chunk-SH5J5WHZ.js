import{c as C,d as G}from"./chunk-33VLGNLN.js";import{a as F}from"./chunk-YZ367IU4.js";import{a as I,b as P}from"./chunk-2V3RL2QY.js";import{l as S}from"./chunk-MXDQPGS7.js";import{Fb as h,Mc as x,Nc as b,Ob as v,Qb as y,Wa as s,Xa as l,da as g,nb as m,pb as a,vb as c,wb as f,xb as u}from"./chunk-74T7YZYI.js";import{C as w}from"./chunk-HY6LSLPF.js";function j(r,o){if(r&1&&(c(0,"h1",6),v(1),f()),r&2){let d=h();s(),y(" ",d.category.name," products ")}}function A(r,o){if(r&1&&u(0,"app-card",7),r&2){let d=o.$implicit;a("product",d)}}var N=(()=>{let o=class o{constructor(e,t,i,n){this.route=e,this.productService=t,this.filterService=i,this.categoryService=n,this.Products=[]}ngOnInit(){window.scrollTo(0,0),w(),this.route.params.subscribe(e=>{console.log("Category id",e.id);let t=e.id;t&&(this.categoryService.GetSingleCategory(t).subscribe(i=>{console.log("category",i),this.category=i.value}),this.applyFilter([t])),this.GetAllProducts(1)}),this.filterService.filter.subscribe(e=>{console.log(e),this.GetAllProducts(1)})}GetAllProducts(e){this.productService.GetAllProducts(e).subscribe(t=>{console.log("All products",t),this.Products=t.value.items,this.page=t.value,this.Products.forEach(i=>{this.productService.GetProductMasterImage(i.id).subscribe(n=>{this.createImageFromBlob(n).then(p=>{i.masterImage=p}).catch(p=>{console.error("Error converting image blob to base64",p)})})})})}createImageFromBlob(e){return new Promise((t,i)=>{let n=new FileReader;n.addEventListener("load",()=>{t(n.result)},!1),n.addEventListener("error",()=>{i(new Error("Failed to read the Blob as a Data URL."))},!1),e?n.readAsDataURL(e):i(new Error("No Blob provided."))})}GoToPage(e){this.GetAllProducts(e)}applyFilter(e){console.log("Selected Categories:",e);let t=this.filterService.filter.value;t.categoryIds=e,this.filterService.filter.next(t)}ngOnDestroy(){let e=this.filterService.filter.value;e.categoryIds=null,this.filterService.filter.next(e)}};o.\u0275fac=function(t){return new(t||o)(l(S),l(P),l(I),l(F))},o.\u0275cmp=g({type:o,selectors:[["app-product-list"]],decls:7,vars:2,consts:[[1,"w-full","flex","flex-col","justify-end","justify-items-end","content-start","align-end","items-start"],[1,"mt-10"],[1,"h-fit","flex","flex-row","w-full","justify-center","align-middle","items-center","pb-28","justify-content-end","align-content-end","align-items-end"],["class","text-2xl underline",4,"ngIf"],[1,"h-fit","w-full","flex","flex-row","flex-wrap","justify-center","content-center","align-content-center","align-middle","items-center","gap-5"],["class","h-[530px] md:h-[600px] block",3,"product",4,"ngFor","ngForOf"],[1,"text-2xl","underline"],[1,"h-[530px]","md:h-[600px]","block",3,"product"]],template:function(t,i){t&1&&(c(0,"div",0),u(1,"app-filter-group",1)(2,"hr"),c(3,"div",2),m(4,j,2,1,"h1",3),c(5,"div",4),m(6,A,1,1,"app-card",5),f()()()),t&2&&(s(4),a("ngIf",i.category),s(2),a("ngForOf",i.Products))},dependencies:[x,b,C,G]});let r=o;return r})();export{N as a};
