import{a as r,r as l,w as p}from"./chunk-Z643URES.js";import{R as n,V as h,_ as c}from"./chunk-74T7YZYI.js";var i="https://app.bosta.co/api/v2/",s={login:`${i}users/login`,ViewData:`${i}users/fullData`,addDelivery:`${i}deliveries`,getAllDeliveries:`${i}deliveries/search`,getShippingFee:`${i}pricing/shipment/calculator`};var v=(()=>{let e=class e{constructor(t){this._http=t,this.tokenKey="BostaToken",this.postLogin=s.login,this.getViewData=s.ViewData,this.sendInformation=l.localhosts.shipment.sendInformation,this.headers=new r().set("Authorization",this.getToken())}login(t){return this._http.genericPostAPIData(this.postLogin,t).pipe(n(o=>{localStorage.setItem(this.tokenKey,o.data.token),this.loginData=o.data}))}logout(){localStorage.removeItem(this.tokenKey)}isAuthenticated(){return!!localStorage.getItem(this.tokenKey)}storeToken(t){localStorage.setItem(this.tokenKey,t)}getToken(){return localStorage.getItem(this.tokenKey)}GetUserData(){let t=this.getToken();t||console.error("No token found");let o=new r().set("Authorization",t);return this._http.genericGetAPIData(this.getViewData,{headers:o}).pipe(n(g=>{console.log("token",this.getToken()),this.userData=g.data}))}StoreData(t){return this._http.genericPostAPIData(this.sendInformation,t)}};e.\u0275fac=function(o){return new(o||e)(c(p))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();export{s as a,v as b};
